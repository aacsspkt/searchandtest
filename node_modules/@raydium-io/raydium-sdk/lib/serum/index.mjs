import{PublicKey as F}from"@solana/web3.js";var L="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",V=new F(L),_={[L]:3},w={3:V};import{PublicKey as z}from"@solana/web3.js";import N,{isBN as st}from"bn.js";import{bits as oe,BitStructure as se,blob as j,Blob as ae,cstr as ie,f32 as ue,f32be as ce,f64 as pe,f64be as ye,greedy as fe,Layout as q,ns64 as le,ns64be as me,nu64 as de,nu64be as Pe,offset as ge,s16 as be,s16be as xe,s24 as he,s24be as Te,s32 as Se,s32be as Ee,s40 as Re,s40be as Le,s48 as _e,s48be as we,s8 as Ae,seq as Ne,struct as Ue,Structure as W,u16 as Ie,u16be as Oe,u24 as Be,u24be as Me,u32 as De,u32be as Ke,u40 as ke,u40be as Ce,u48 as ve,u48be as Ge,u8 as Fe,UInt as Ve,union as je,Union as qe,unionLayoutDiscriminator as We,utf8 as $e}from"@solana/buffer-layout";var x=q,A=W;var m=j;var h=class extends x{constructor(t,r,n){super(t,n);this.blob=m(t),this.signed=r}decode(t,r=0){let n=new N(this.blob.decode(t,r),10,"le");return this.signed?n.fromTwos(this.span*8).clone():n}encode(t,r,n=0){return typeof t=="number"&&(t=new N(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,n)}};function p(o){return new h(8,!1,o)}var T=class extends x{constructor(t,r,n,u){super(t.span,u);this.layout=t,this.decoder=r,this.encoder=n}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,n){return this.layout.encode(this.encoder(t),r,n)}getSpan(t,r){return this.layout.getSpan(t,r)}};function y(o){return new T(m(32),e=>new z(e),e=>e.toBuffer(),o)}var S=class extends A{decode(e,t){return super.decode(e,t)}};function U(o,e,t){return new S(o,e,t)}var J=U([m(5),m(8),y("ownAddress"),p("vaultSignerNonce"),y("baseMint"),y("quoteMint"),y("baseVault"),p("baseDepositsTotal"),p("baseFeesAccrued"),y("quoteVault"),p("quoteDepositsTotal"),p("quoteFeesAccrued"),p("quoteDustThreshold"),y("requestQueue"),y("eventQueue"),y("bids"),y("asks"),p("baseLotSize"),p("quoteLotSize"),p("feeRateBps"),p("referrerRebatesAccrued"),m(7)]),I={3:J};import{PublicKey as Z}from"@solana/web3.js";import{PublicKey as It}from"@solana/web3.js";import{PublicKey as Q,SystemProgram as H}from"@solana/web3.js";import{PublicKey as Y}from"@solana/web3.js";var E="1.1.0-beta.1";import"@colors/colors";var O=!1,B=!1,d={debug:1,default:2,info:2,warning:3,error:4,off:5},M={},R;function X(){try{let o=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{o.push(e)}}),o.length)throw new Error("missing "+o.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(o){if(o instanceof Error)return o.message}return""}var D=X(),k=(u=>(u.DEBUG="DEBUG",u.INFO="INFO",u.WARNING="WARNING",u.ERROR="ERROR",u.OFF="OFF",u))(k||{}),C=(c=>(c.UNKNOWN_ERROR="UNKNOWN_ERROR",c.NOT_IMPLEMENTED="NOT_IMPLEMENTED",c.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",c.NETWORK_ERROR="NETWORK_ERROR",c.RPC_ERROR="RPC_ERROR",c.TIMEOUT="TIMEOUT",c.BUFFER_OVERRUN="BUFFER_OVERRUN",c.NUMERIC_FAULT="NUMERIC_FAULT",c.MISSING_NEW="MISSING_NEW",c.INVALID_ARGUMENT="INVALID_ARGUMENT",c.MISSING_ARGUMENT="MISSING_ARGUMENT",c.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",c.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",c))(C||{}),K="0123456789abcdef";function v(o,e=!1){let t=o;try{if(o instanceof Uint8Array){let r="";for(let n=0;n<o.length;n++)r+=K[o[n]>>4],r+=K[o[n]&15];t=`Uint8Array(0x${r})`}else if(o instanceof Y)t=`PublicKey(${o.toBase58()})`;else if(o instanceof Object&&!e){let r={};Object.entries(o).forEach(([n,u])=>{r[n]=v(u,!0)}),t=JSON.stringify(r)}else e||(t=JSON.stringify(o))}catch{t=JSON.stringify(o.toString())}return t}var s=class{constructor(e){this.version=E;this.moduleName=e}_log(e,t){let r=e.toLowerCase();d[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!((M[this.moduleName]||d.default)>d[r])&&console.log(...t)}debug(...e){this._log(s.levels.DEBUG,["[DEBUG]".blue,...e])}info(...e){this._log(s.levels.INFO,["[INFO]".green,...e])}warn(...e){this._log(s.levels.WARNING,["[WARN]".yellow,...e])}makeError(e,t,r){if(B)return this.makeError("censored error",t,{});t||(t=s.errors.UNKNOWN_ERROR),r||(r={});let n=[];Object.entries(r).forEach(([g,b])=>{n.push(`${g}=${v(b)})`)}),n.push(`code=${t}`),n.push(`module=${this.moduleName}`),n.push(`version=${this.version}`);let u=e;n.length&&(e+=" ("+n.join(", ")+")");let l=new Error(e);return l.reason=u,l.code=t,Object.entries(r).forEach(([g,b])=>{l[g]=b}),l}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,s.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),D&&this.throwError("platform missing String.prototype.normalize",s.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:D})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,s.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,s.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,s.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,s.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",s.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",s.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",s.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return R||(R=new s(E)),R}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",s.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),O){if(!e)return;this.globalLogger().throwError("error censorship permanent",s.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}B=!!e,O=!!t}static setLogLevel(e,t){let r=d[t.toLowerCase()];if(r==null){s.globalLogger().warn("invalid log level - "+t);return}M[e]=r}static from(e){return new s(e)}},f=s;f.errors=C,f.levels=k;import{ASSOCIATED_TOKEN_PROGRAM_ID as Rt,TOKEN_PROGRAM_ID as Lt}from"@solana/spl-token";import{SYSVAR_CLOCK_PUBKEY as wt,SYSVAR_RENT_PUBKEY as At}from"@solana/web3.js";var xt=f.from("common/pubkey"),ht=H.programId,Tt=new Q("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo");import{PublicKey as Dt}from"@solana/web3.js";import kt from"bn.js";import{PACKET_DATA_SIZE as $t,PublicKey as zt,Transaction as Xt}from"@solana/web3.js";var er=f.from("common/web3");var P=f.from("Serum"),G=class{static getProgramId(e){let t=w[e];return P.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),r=_[t];return P.assertArgument(!!r,"invalid program id","programId",t),r}static getStateLayout(e){let t=I[e];return P.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static async getAssociatedAuthority({programId:e,marketId:t}){let r=[t.toBuffer()],n=0,u;for(;n<100;){try{let l=r.concat(Buffer.from([n]),Buffer.alloc(7));u=await Z.createProgramAddress(l,e)}catch(l){if(l instanceof TypeError)throw l;n++;continue}return{publicKey:u,nonce:n}}return P.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}};export{J as MARKET_STATE_LAYOUT_V3,I as MARKET_VERSION_TO_STATE_LAYOUT,G as Market,_ as SERUM_PROGRAMID_TO_VERSION,V as SERUM_PROGRAM_ID_V3,w as SERUM_VERSION_TO_PROGRAMID,L as _SERUM_PROGRAM_ID_V3};
//# sourceMappingURL=index.mjs.map