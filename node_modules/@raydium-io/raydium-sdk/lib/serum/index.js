var ee=Object.create;var d=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,oe=Object.prototype.hasOwnProperty;var se=(o,e)=>{for(var t in e)d(o,t,{get:e[t],enumerable:!0})},M=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of re(e))!oe.call(o,s)&&s!==t&&d(o,s,{get:()=>e[s],enumerable:!(r=te(e,s))||r.enumerable});return o};var D=(o,e,t)=>(t=o!=null?ee(ne(o)):{},M(e||!o||!o.__esModule?d(t,"default",{value:o,enumerable:!0}):t,o)),ae=o=>M(d({},"__esModule",{value:!0}),o);var fe={};se(fe,{MARKET_STATE_LAYOUT_V3:()=>F,MARKET_VERSION_TO_STATE_LAYOUT:()=>N,Market:()=>B,SERUM_PROGRAMID_TO_VERSION:()=>E,SERUM_PROGRAM_ID_V3:()=>k,SERUM_VERSION_TO_PROGRAMID:()=>R,_SERUM_PROGRAM_ID_V3:()=>S});module.exports=ae(fe);var K=require("@solana/web3.js"),S="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",k=new K.PublicKey(S),E={[S]:3},R={3:k};var v=require("@solana/web3.js"),P=D(require("bn.js"));var n=require("@solana/buffer-layout"),L=n.Layout,C=n.Structure;var m=n.blob;var _=class extends L{constructor(t,r,s){super(t,s);this.blob=m(t),this.signed=r}decode(t,r=0){let s=new P.default(this.blob.decode(t,r),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(t,r,s=0){return typeof t=="number"&&(t=new P.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,s)}};function p(o){return new _(8,!1,o)}var w=class extends L{constructor(t,r,s,u){super(t.span,u);this.layout=t,this.decoder=r,this.encoder=s}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,s){return this.layout.encode(this.encoder(t),r,s)}getSpan(t,r){return this.layout.getSpan(t,r)}};function y(o){return new w(m(32),e=>new v.PublicKey(e),e=>e.toBuffer(),o)}var A=class extends C{decode(e,t){return super.decode(e,t)}};function G(o,e,t){return new A(o,e,t)}var F=G([m(5),m(8),y("ownAddress"),p("vaultSignerNonce"),y("baseMint"),y("quoteMint"),y("baseVault"),p("baseDepositsTotal"),p("baseFeesAccrued"),y("quoteVault"),p("quoteDepositsTotal"),p("quoteFeesAccrued"),p("quoteDustThreshold"),y("requestQueue"),y("eventQueue"),y("bids"),y("asks"),p("baseLotSize"),p("quoteLotSize"),p("feeRateBps"),p("referrerRebatesAccrued"),m(7)]),N={3:F};var Z=require("@solana/web3.js");var ce=require("@solana/web3.js");var b=require("@solana/web3.js");var z=require("@solana/web3.js");var U="1.1.0-beta.1";var Be=require("@colors/colors"),V=!1,j=!1,g={debug:1,default:2,info:2,warning:3,error:4,off:5},q={},I;function ue(){try{let o=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{o.push(e)}}),o.length)throw new Error("missing "+o.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(o){if(o instanceof Error)return o.message}return""}var W=ue(),J=(u=>(u.DEBUG="DEBUG",u.INFO="INFO",u.WARNING="WARNING",u.ERROR="ERROR",u.OFF="OFF",u))(J||{}),Y=(c=>(c.UNKNOWN_ERROR="UNKNOWN_ERROR",c.NOT_IMPLEMENTED="NOT_IMPLEMENTED",c.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",c.NETWORK_ERROR="NETWORK_ERROR",c.RPC_ERROR="RPC_ERROR",c.TIMEOUT="TIMEOUT",c.BUFFER_OVERRUN="BUFFER_OVERRUN",c.NUMERIC_FAULT="NUMERIC_FAULT",c.MISSING_NEW="MISSING_NEW",c.INVALID_ARGUMENT="INVALID_ARGUMENT",c.MISSING_ARGUMENT="MISSING_ARGUMENT",c.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",c.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",c))(Y||{}),$="0123456789abcdef";function X(o,e=!1){let t=o;try{if(o instanceof Uint8Array){let r="";for(let s=0;s<o.length;s++)r+=$[o[s]>>4],r+=$[o[s]&15];t=`Uint8Array(0x${r})`}else if(o instanceof z.PublicKey)t=`PublicKey(${o.toBase58()})`;else if(o instanceof Object&&!e){let r={};Object.entries(o).forEach(([s,u])=>{r[s]=X(u,!0)}),t=JSON.stringify(r)}else e||(t=JSON.stringify(o))}catch{t=JSON.stringify(o.toString())}return t}var a=class{constructor(e){this.version=U;this.moduleName=e}_log(e,t){let r=e.toLowerCase();g[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!((q[this.moduleName]||g.default)>g[r])&&console.log(...t)}debug(...e){this._log(a.levels.DEBUG,["[DEBUG]".blue,...e])}info(...e){this._log(a.levels.INFO,["[INFO]".green,...e])}warn(...e){this._log(a.levels.WARNING,["[WARN]".yellow,...e])}makeError(e,t,r){if(j)return this.makeError("censored error",t,{});t||(t=a.errors.UNKNOWN_ERROR),r||(r={});let s=[];Object.entries(r).forEach(([h,T])=>{s.push(`${h}=${X(T)})`)}),s.push(`code=${t}`),s.push(`module=${this.moduleName}`),s.push(`version=${this.version}`);let u=e;s.length&&(e+=" ("+s.join(", ")+")");let l=new Error(e);return l.reason=u,l.code=t,Object.entries(r).forEach(([h,T])=>{l[h]=T}),l}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,a.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,s){e||this.throwError(t,r,s)}assertArgument(e,t,r,s){e||this.throwArgumentError(t,r,s)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),W&&this.throwError("platform missing String.prototype.normalize",a.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:W})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,a.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,a.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,a.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,a.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",a.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",a.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",a.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return I||(I=new a(U)),I}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",a.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),V){if(!e)return;this.globalLogger().throwError("error censorship permanent",a.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}j=!!e,V=!!t}static setLogLevel(e,t){let r=g[t.toLowerCase()];if(r==null){a.globalLogger().warn("invalid log level - "+t);return}q[e]=r}static from(e){return new a(e)}},f=a;f.errors=Y,f.levels=J;var Q=require("@solana/spl-token"),H=require("@solana/web3.js"),Ke=f.from("common/pubkey"),ke=b.SystemProgram.programId,Ce=new b.PublicKey("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo");var pe=require("@solana/web3.js"),ye=D(require("bn.js"));var O=require("@solana/web3.js");var tt=f.from("common/web3");var x=f.from("Serum"),B=class{static getProgramId(e){let t=R[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),r=E[t];return x.assertArgument(!!r,"invalid program id","programId",t),r}static getStateLayout(e){let t=N[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static async getAssociatedAuthority({programId:e,marketId:t}){let r=[t.toBuffer()],s=0,u;for(;s<100;){try{let l=r.concat(Buffer.from([s]),Buffer.alloc(7));u=await Z.PublicKey.createProgramAddress(l,e)}catch(l){if(l instanceof TypeError)throw l;s++;continue}return{publicKey:u,nonce:s}}return x.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}};0&&(module.exports={MARKET_STATE_LAYOUT_V3,MARKET_VERSION_TO_STATE_LAYOUT,Market,SERUM_PROGRAMID_TO_VERSION,SERUM_PROGRAM_ID_V3,SERUM_VERSION_TO_PROGRAMID,_SERUM_PROGRAM_ID_V3});
//# sourceMappingURL=index.js.map