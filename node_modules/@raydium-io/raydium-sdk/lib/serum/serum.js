var H=Object.create;var d=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var ne=(o,e)=>{for(var t in e)d(o,t,{get:e[t],enumerable:!0})},U=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ee(e))!re.call(o,s)&&s!==t&&d(o,s,{get:()=>e[s],enumerable:!(r=Z(e,s))||r.enumerable});return o};var I=(o,e,t)=>(t=o!=null?H(te(o)):{},U(e||!o||!o.__esModule?d(t,"default",{value:o,enumerable:!0}):t,o)),oe=o=>U(d({},"__esModule",{value:!0}),o);var fe={};ne(fe,{Market:()=>N});module.exports=oe(fe);var Q=require("@solana/web3.js");var ae=require("@solana/web3.js");var g=require("@solana/web3.js");var k=require("@solana/web3.js");var S="1.1.0-beta.1";var Pe=require("@colors/colors"),O=!1,B=!1,P={debug:1,default:2,info:2,warning:3,error:4,off:5},M={},E;function se(){try{let o=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{o.push(e)}}),o.length)throw new Error("missing "+o.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(o){if(o instanceof Error)return o.message}return""}var D=se(),C=(i=>(i.DEBUG="DEBUG",i.INFO="INFO",i.WARNING="WARNING",i.ERROR="ERROR",i.OFF="OFF",i))(C||{}),v=(c=>(c.UNKNOWN_ERROR="UNKNOWN_ERROR",c.NOT_IMPLEMENTED="NOT_IMPLEMENTED",c.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",c.NETWORK_ERROR="NETWORK_ERROR",c.RPC_ERROR="RPC_ERROR",c.TIMEOUT="TIMEOUT",c.BUFFER_OVERRUN="BUFFER_OVERRUN",c.NUMERIC_FAULT="NUMERIC_FAULT",c.MISSING_NEW="MISSING_NEW",c.INVALID_ARGUMENT="INVALID_ARGUMENT",c.MISSING_ARGUMENT="MISSING_ARGUMENT",c.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",c.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",c))(v||{}),K="0123456789abcdef";function G(o,e=!1){let t=o;try{if(o instanceof Uint8Array){let r="";for(let s=0;s<o.length;s++)r+=K[o[s]>>4],r+=K[o[s]&15];t=`Uint8Array(0x${r})`}else if(o instanceof k.PublicKey)t=`PublicKey(${o.toBase58()})`;else if(o instanceof Object&&!e){let r={};Object.entries(o).forEach(([s,i])=>{r[s]=G(i,!0)}),t=JSON.stringify(r)}else e||(t=JSON.stringify(o))}catch{t=JSON.stringify(o.toString())}return t}var a=class{constructor(e){this.version=S;this.moduleName=e}_log(e,t){let r=e.toLowerCase();P[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!((M[this.moduleName]||P.default)>P[r])&&console.log(...t)}debug(...e){this._log(a.levels.DEBUG,["[DEBUG]".blue,...e])}info(...e){this._log(a.levels.INFO,["[INFO]".green,...e])}warn(...e){this._log(a.levels.WARNING,["[WARN]".yellow,...e])}makeError(e,t,r){if(B)return this.makeError("censored error",t,{});t||(t=a.errors.UNKNOWN_ERROR),r||(r={});let s=[];Object.entries(r).forEach(([h,T])=>{s.push(`${h}=${G(T)})`)}),s.push(`code=${t}`),s.push(`module=${this.moduleName}`),s.push(`version=${this.version}`);let i=e;s.length&&(e+=" ("+s.join(", ")+")");let l=new Error(e);return l.reason=i,l.code=t,Object.entries(r).forEach(([h,T])=>{l[h]=T}),l}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,a.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,s){e||this.throwError(t,r,s)}assertArgument(e,t,r,s){e||this.throwArgumentError(t,r,s)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),D&&this.throwError("platform missing String.prototype.normalize",a.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:D})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,a.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,a.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,a.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,a.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",a.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",a.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",a.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return E||(E=new a(S)),E}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",a.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),O){if(!e)return;this.globalLogger().throwError("error censorship permanent",a.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}B=!!e,O=!!t}static setLogLevel(e,t){let r=P[t.toLowerCase()];if(r==null){a.globalLogger().warn("invalid log level - "+t);return}M[e]=r}static from(e){return new a(e)}},y=a;y.errors=v,y.levels=C;var F=require("@solana/spl-token"),V=require("@solana/web3.js"),xe=y.from("common/pubkey"),he=g.SystemProgram.programId,Te=new g.PublicKey("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo");var ie=require("@solana/web3.js"),ue=I(require("bn.js"));var R=require("@solana/web3.js");var Ce=y.from("common/web3");var j=require("@solana/web3.js"),q="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",pe=new j.PublicKey(q),W={[q]:3},$={3:pe};var J=require("@solana/web3.js"),b=I(require("bn.js"));var n=require("@solana/buffer-layout"),L=n.Layout,z=n.Structure;var m=n.blob;var _=class extends L{constructor(t,r,s){super(t,s);this.blob=m(t),this.signed=r}decode(t,r=0){let s=new b.default(this.blob.decode(t,r),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(t,r,s=0){return typeof t=="number"&&(t=new b.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,s)}};function p(o){return new _(8,!1,o)}var w=class extends L{constructor(t,r,s,i){super(t.span,i);this.layout=t,this.decoder=r,this.encoder=s}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,s){return this.layout.encode(this.encoder(t),r,s)}getSpan(t,r){return this.layout.getSpan(t,r)}};function f(o){return new w(m(32),e=>new J.PublicKey(e),e=>e.toBuffer(),o)}var A=class extends z{decode(e,t){return super.decode(e,t)}};function Y(o,e,t){return new A(o,e,t)}var ye=Y([m(5),m(8),f("ownAddress"),p("vaultSignerNonce"),f("baseMint"),f("quoteMint"),f("baseVault"),p("baseDepositsTotal"),p("baseFeesAccrued"),f("quoteVault"),p("quoteDepositsTotal"),p("quoteFeesAccrued"),p("quoteDustThreshold"),f("requestQueue"),f("eventQueue"),f("bids"),f("asks"),p("baseLotSize"),p("quoteLotSize"),p("feeRateBps"),p("referrerRebatesAccrued"),m(7)]),X={3:ye};var x=y.from("Serum"),N=class{static getProgramId(e){let t=$[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),r=W[t];return x.assertArgument(!!r,"invalid program id","programId",t),r}static getStateLayout(e){let t=X[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static async getAssociatedAuthority({programId:e,marketId:t}){let r=[t.toBuffer()],s=0,i;for(;s<100;){try{let l=r.concat(Buffer.from([s]),Buffer.alloc(7));i=await Q.PublicKey.createProgramAddress(l,e)}catch(l){if(l instanceof TypeError)throw l;s++;continue}return{publicKey:i,nonce:s}}return x.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}};0&&(module.exports={Market});
//# sourceMappingURL=serum.js.map