var $=Object.defineProperty,J=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var S=(e,r,t)=>r in e?$(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,T=(e,r)=>{for(var t in r||(r={}))V.call(r,t)&&S(e,t,r[t]);if(w)for(var t of w(r))q.call(r,t)&&S(e,t,r[t]);return e},U=(e,r)=>J(e,z(r));import{PublicKey as Q}from"@solana/web3.js";import{PublicKey as N,SystemProgram as H}from"@solana/web3.js";import{PublicKey as X}from"@solana/web3.js";var d="1.1.0-beta.1";import"@colors/colors";var x=!1,_=!1,R={debug:1,default:2,info:2,warning:3,error:4,off:5},M={},b;function Y(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(r=>{try{if("test".normalize(r)!=="test")throw new Error("bad normalize")}catch{e.push(r)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){if(e instanceof Error)return e.message}return""}var F=Y(),K=(i=>(i.DEBUG="DEBUG",i.INFO="INFO",i.WARNING="WARNING",i.ERROR="ERROR",i.OFF="OFF",i))(K||{}),G=(a=>(a.UNKNOWN_ERROR="UNKNOWN_ERROR",a.NOT_IMPLEMENTED="NOT_IMPLEMENTED",a.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",a.NETWORK_ERROR="NETWORK_ERROR",a.RPC_ERROR="RPC_ERROR",a.TIMEOUT="TIMEOUT",a.BUFFER_OVERRUN="BUFFER_OVERRUN",a.NUMERIC_FAULT="NUMERIC_FAULT",a.MISSING_NEW="MISSING_NEW",a.INVALID_ARGUMENT="INVALID_ARGUMENT",a.MISSING_ARGUMENT="MISSING_ARGUMENT",a.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",a.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",a))(G||{}),D="0123456789abcdef";function C(e,r=!1){let t=e;try{if(e instanceof Uint8Array){let n="";for(let o=0;o<e.length;o++)n+=D[e[o]>>4],n+=D[e[o]&15];t=`Uint8Array(0x${n})`}else if(e instanceof X)t=`PublicKey(${e.toBase58()})`;else if(e instanceof Object&&!r){let n={};Object.entries(e).forEach(([o,i])=>{n[o]=C(i,!0)}),t=JSON.stringify(n)}else r||(t=JSON.stringify(e))}catch{t=JSON.stringify(e.toString())}return t}var s=class{constructor(r){this.version=d;this.moduleName=r}_log(r,t){let n=r.toLowerCase();R[n]==null&&this.throwArgumentError("invalid log level name","logLevel",r),!((M[this.moduleName]||R.default)>R[n])&&console.log(...t)}debug(...r){this._log(s.levels.DEBUG,["[DEBUG]".blue,...r])}info(...r){this._log(s.levels.INFO,["[INFO]".green,...r])}warn(...r){this._log(s.levels.WARNING,["[WARN]".yellow,...r])}makeError(r,t,n){if(_)return this.makeError("censored error",t,{});t||(t=s.errors.UNKNOWN_ERROR),n||(n={});let o=[];Object.entries(n).forEach(([l,c])=>{o.push(`${l}=${C(c)})`)}),o.push(`code=${t}`),o.push(`module=${this.moduleName}`),o.push(`version=${this.version}`);let i=r;o.length&&(r+=" ("+o.join(", ")+")");let f=new Error(r);return f.reason=i,f.code=t,Object.entries(n).forEach(([l,c])=>{f[l]=c}),f}throwError(r,t,n){throw this.makeError(r,t,n)}throwArgumentError(r,t,n){return this.throwError(r,s.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(r,t,n,o){r||this.throwError(t,n,o)}assertArgument(r,t,n,o){r||this.throwArgumentError(t,n,o)}checkNormalize(r){r==null&&(r="platform missing String.prototype.normalize"),F&&this.throwError("platform missing String.prototype.normalize",s.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:F})}checkSafeUint53(r,t){typeof r=="number"&&(t==null&&(t="value not safe"),(r<0||r>=9007199254740991)&&this.throwError(t,s.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:r}),r%1&&this.throwError(t,s.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:r}))}checkArgumentCount(r,t,n){n?n=": "+n:n="",r<t&&this.throwError("missing argument"+n,s.errors.MISSING_ARGUMENT,{count:r,expectedCount:t}),r>t&&this.throwError("too many arguments"+n,s.errors.UNEXPECTED_ARGUMENT,{count:r,expectedCount:t})}checkNew(r,t){(r===Object||r==null)&&this.throwError("missing new",s.errors.MISSING_NEW,{name:t.name})}checkAbstract(r,t){r===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",s.errors.UNSUPPORTED_OPERATION,{name:r.name,operation:"new"}):(r===Object||r==null)&&this.throwError("missing new",s.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return b||(b=new s(d)),b}static setCensorship(r,t){if(!r&&t&&this.globalLogger().throwError("cannot permanently disable censorship",s.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),x){if(!r)return;this.globalLogger().throwError("error censorship permanent",s.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_=!!r,x=!!t}static setLogLevel(r,t){let n=R[t.toLowerCase()];if(n==null){s.globalLogger().warn("invalid log level - "+t);return}M[r]=n}static from(r){return new s(r)}},u=s;u.errors=G,u.levels=K;import{ASSOCIATED_TOKEN_PROGRAM_ID as Nr,TOKEN_PROGRAM_ID as Tr}from"@solana/spl-token";import{SYSVAR_CLOCK_PUBKEY as br,SYSVAR_RENT_PUBKEY as Ar}from"@solana/web3.js";var B=u.from("common/pubkey"),mr=H.programId,pr=new N("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo");function A(e){if(e instanceof N)return e;if(typeof e=="string")try{return new N(e)}catch{return B.throwArgumentError("invalid public key","publicKey",e)}return B.throwArgumentError("invalid public key","publicKey",e)}async function gr(e,r){let[t,n]=await N.findProgramAddress(e,r);return{publicKey:t,nonce:n}}function hr(e,r){return{pubkey:e,isWritable:!0,isSigner:r}}function yr(e,r){return{pubkey:e,isWritable:!1,isSigner:r}}function Pr(e){return Object.entries(e).reduce((r,[t,n])=>(typeof n=="string"?r[t]=A(n):n instanceof Array?r[t]=n.map(o=>A(o)):r[t]=n,r),{})}function wr(e){return Object.entries(e).reduce((r,[t,n])=>(n instanceof Q?r[t]=n.toBase58():n instanceof Array?r[t]=n.map(o=>o.toBase58()):r[t]=n,r),{})}import{PublicKey as O}from"@solana/web3.js";import I from"bn.js";function Z(){if(typeof Symbol<"u"&&typeof Symbol.for=="function")try{O.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return`<PublicKey: ${this.toString()}>`}}catch{O.prototype.inspect=function(){return`<PublicKey: ${this.toString()}>`}}else O.prototype.inspect=function(){return`<PublicKey: ${this.toString()}>`}}function rr(){if(typeof Symbol<"u"&&typeof Symbol.for=="function")try{I.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return`<${this.red?"BN-R":"BN"}: ${this.toString()}>`}}catch{I.prototype.inspect=function(){return`<${this.red?"BN-R":"BN"}: ${this.toString()}>`}}else I.prototype.inspect=function(){return`<${this.red?"BN-R":"BN"}: ${this.toString()}>`}}function _r(){Z(),rr()}function k(e,r=1,t=[]){let n=[...e];if(r<=0)return t;for(;n.length;)t.push(n.splice(0,r));return t}function Fr(e,...r){return e.filter(t=>r.every(n=>n.includes(t)))}function Dr(e,...r){return e.filter(t=>r.every(n=>!n.includes(t)))}function Kr(e){return[...new Set(e)]}import{PACKET_DATA_SIZE as tr,PublicKey as v,Transaction as P}from"@solana/web3.js";var m=u.from("common/web3");async function er(e,r,t){let{batchRequest:n,commitment:o}=T({batchRequest:!1},t),i=k(r,100),f=new Array(i.length).fill([]);if(n){let l=i.map(h=>{let E=e._buildArgs([h.map(y=>y.toBase58())],o,"base64");return{methodName:"getMultipleAccounts",args:E}});f=(await e._rpcBatchRequest(l)).map(h=>h.error?m.throwError("failed to get info for multiple accounts",u.errors.RPC_ERROR,{message:h.error.message}):h.result.value.map(E=>{if(E){let{data:y,executable:L,lamports:a,owner:W,rentEpoch:j}=E;return y.length!==2&&y[1]!=="base64"?m.throwError("info must be base64 encoded",u.errors.RPC_ERROR):{data:Buffer.from(y[0],"base64"),executable:L,lamports:a,owner:new v(W),rentEpoch:j}}else return null}))}else try{f=await Promise.all(i.map(l=>e.getMultipleAccountsInfo(l,o)))}catch(l){if(l instanceof Error)return m.throwError("failed to get info for multiple accounts",u.errors.RPC_ERROR,{message:l.message})}return f.flat()}async function zr(e,r,t){let n=await er(e,r.map(o=>o.pubkey),t);return r.map((o,i)=>U(T({},o),{accountInfo:n[i]}))}function nr(e,r){if(e.length<1)return m.throwArgumentError("no instructions provided","instructions",e);if(r.length<1)return m.throwArgumentError("no signers provided","signers",r);let t=new P({recentBlockhash:"11111111111111111111111111111111",feePayer:r[0]});t.add(...e);let n=t.compileMessage().serialize();return r.length+r.length*64+n.length}async function Vr(e,r,t){let n=new v("RaydiumSimuLateTransaction11111111111111111"),o=[],i=new P({feePayer:n});for(let c of r)nr([...i.instructions,c],[n])>tr&&(o.push(i),i=new P({feePayer:n})),i.add(c);i.instructions.length>0&&o.push(i);let f=[];try{f=await Promise.all(o.map(c=>e.simulateTransaction(c)))}catch(c){if(c instanceof Error)return m.throwError("failed to simulate for instructions",u.errors.RPC_ERROR,{message:c.message})}let l=[];for(let c of f){let{value:h}=c;if(m.debug("simulate result:",c),h.logs){let E=h.logs.filter(y=>y&&y.includes(t));m.debug("filteredLog:",l),m.assertArgument(E.length!==0,"simulate log not match keyword","keyword",t),l.push(...E)}}return l}function qr(e,r){let t=e.match(/{["\w:,]+}/g);return!t||t.length!==1?m.throwArgumentError("simulate log fail to match json","keyword",r):t[0]}function Xr(e,r){let n=new RegExp(`"${r}":(\\d+)`,"g").exec(e);return!n||n.length!==2?m.throwArgumentError("simulate log fail to match key","key",r):n[1]}export{Nr as ASSOCIATED_TOKEN_PROGRAM_ID,hr as AccountMeta,yr as AccountMetaReadonly,G as ErrorCode,K as LogLevel,u as Logger,pr as MEMO_PROGRAM_ID,mr as SYSTEM_PROGRAM_ID,br as SYSVAR_CLOCK_PUBKEY,Ar as SYSVAR_RENT_PUBKEY,Tr as TOKEN_PROGRAM_ID,k as chunkArray,gr as findProgramAddress,nr as forecastTransactionSize,er as getMultipleAccountsInfo,zr as getMultipleAccountsInfoWithCustomFlags,_r as inspectAll,rr as inspectBN,Z as inspectPublicKey,Fr as intersection,Pr as jsonInfo2PoolKeys,qr as parseSimulateLogToJson,Xr as parseSimulateValue,wr as poolKeys2JsonInfo,Vr as simulateMultipleInstruction,Kr as uniq,A as validateAndParsePublicKey,Dr as xor};
//# sourceMappingURL=index.mjs.map